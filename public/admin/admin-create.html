<!DOCTYPE html><html lang="vi"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#667eea">
<meta name="msapplication-navbutton-color" content="#667eea">
<meta name="apple-mobile-web-app-title" content="eTax Admin">
<title>T·∫°o t√†i kho·∫£n Admin</title>
<link rel="stylesheet" href="css/admin.css">
<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyD_rJgBFgBulheVenQUE2KXr4PBpSpTCxw",
    authDomain: "etax-7fbf8.firebaseapp.com",
    databaseURL: "https://etax-7fbf8-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "etax-7fbf8",
    storageBucket: "etax-7fbf8.appspot.com",
    messagingSenderId: "1030026724634",
    appId: "1:1030026724634:web:d76f5f9dad43bad6fd58a3"
  };
  
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();
  
  window.createAdmin = async ()=>{
    const email = document.querySelector('#email').value.trim();
    const pass = document.querySelector('#pass').value;
    const confirmPass = document.querySelector('#confirmPass').value;
    const fullName = document.querySelector('#fullName').value.trim();
    
    if(!email || !pass || !confirmPass || !fullName) {
      alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!");
      return;
    }
    
    if(pass !== confirmPass) {
      alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!");
      return;
    }
    
    if(pass.length < 6) {
      alert("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!");
      return;
    }
    
    try{
      const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, pass);
      
      // Save admin info to Realtime Database
      await db.ref('admins/' + userCredential.user.uid).set({
        email: email,
        fullName: fullName,
        role: 'admin',
        createdAt: new Date().toISOString(),
        isActive: true
      });
      
      alert(`‚úÖ T·∫°o t√†i kho·∫£n admin th√†nh c√¥ng!\nüìß Email: ${email}\nüë§ T√™n: ${fullName}\nüÜî UID: ${userCredential.user.uid}`);
      
      // Clear form
      document.querySelector('#email').value = '';
      document.querySelector('#pass').value = '';
      document.querySelector('#confirmPass').value = '';
      document.querySelector('#fullName').value = '';
      
    }catch(e){ 
      alert("L·ªói t·∫°o t√†i kho·∫£n: "+ e.message); 
    }
  };
</script>
</head><body><div class="wrap">
  <div style="text-align: center; margin-bottom: 20px;">
    <a href="admin-home.html" style="color: white; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
      <i class="fa fa-arrow-left"></i> V·ªÅ trang ch·ªß Admin
    </a>
  </div>
  <h2>T·∫°o t√†i kho·∫£n Admin</h2>
  <div class="card">
    <label>H·ªç v√† t√™n</label>
    <input id="fullName" placeholder="Nguy·ªÖn VƒÉn A">
    
    <label>Email admin</label>
    <input id="email" type="email" placeholder="admin@company.com">
    
    <label>M·∫≠t kh·∫©u</label>
    <input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    
    <label>X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
    <input id="confirmPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    
    <p><button onclick="createAdmin()">T·∫°o t√†i kho·∫£n Admin</button></p>
    <p class="small">
      <a href="admin-login.html">‚Üê Quay l·∫°i ƒëƒÉng nh·∫≠p</a><br><br>
      * T√†i kho·∫£n admin s·∫Ω c√≥ quy·ªÅn truy c·∫≠p t·∫•t c·∫£ ch·ª©c nƒÉng qu·∫£n l√Ω.<br>
      * Email v√† m·∫≠t kh·∫©u s·∫Ω ƒë∆∞·ª£c l∆∞u v√†o Firebase Authentication.
    </p>
  </div>
</div></body></html>